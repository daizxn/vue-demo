import{_ as $,c as d,a as t,t as l,F as C,r as I,o as p,d as v,e as U,f as A,b as j}from"./index-lVoSuW5d.js";const it="/vue-demo/title-banner.png",R={class:"highlight-card"},H={class:"date-range"},N={class:"highlight-text"},V={class:"highlight-title"},B={class:"highlight-links"},F=["href"],O={__name:"HighlightSection",props:{startDate:{type:String,required:!0},endDate:{type:String,required:!0},period:{type:String,required:!0},title:{type:String,default:"本期 Highlight"},links:{type:Array,required:!0,validator(r){return r.every(s=>s.url&&s.text&&s.section)}}},setup(r){return(s,S)=>(p(),d("div",R,[t("div",H,l(r.startDate)+" - "+l(r.endDate)+" 第 "+l(r.period)+" 期",1),t("div",N,[t("div",V,l(r.title),1),t("div",B,[t("ol",null,[(p(!0),d(C,null,I(r.links,(o,g)=>(p(),d("li",{key:g},[t("span",null,l(g+1)+". ",1),t("span",null,"【"+l(o.section)+"】",1),t("a",{href:o.url,target:"_blank"},l(o.text),9,F)]))),128))])])])]))}},at=$(O,[["__scopeId","data-v-ec225528"]]),K={class:"card-content"},M={class:"card-title"},T={class:"card-description"},E={class:"caed-from"},W=["src"],z={__name:"LinkCard",props:{url:{type:String,required:!0},title:{type:String},description:{type:String},image:{type:String}},setup(r){const s=v(""),S=v(""),o=v(""),g=v(""),x=v(!1),i=r,L=()=>{i.url?window.open(i.url,"_blank"):alert("链接无效")};return U(async()=>{var b,h;{if(!i.url){alert("请提供一个有效的链接");return}try{let q=function(n){if(!n.src)return!1;const _=[/\.png$/i,/transparent/i,/alpha/i,/overlay/i,/watermark/i];for(const e of _)if((e.test(n.src)||e.test(n.alt))&&(!e.test(n.src)||n.src.includes(".png")))return!1;const f=[/logo/i,/icon/i,/avatar/i,/ad[_-]/i,/banner/i,/button/i,/pixel/i,/1x1/i,/tracking/i,/spacer/i,/blank/i,/clear/i];for(const e of f)if(e.test(n.src)||e.test(n.alt)||e.test(n.className))return!1;return n.src.match(/\.(jpg|jpeg)$/i)?!0:[/article/i,/photo/i,/image/i,/picture/i,/content/i].some(e=>e.test(n.src)||e.test(n.alt))};const P=await(await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(i.url)}`)).text(),c=new DOMParser().parseFromString(P,"text/html");let w="",u="",a="",k="";if(typeof i.title>"u"?w=c.querySelector("title")?c.querySelector("title").innerText:"未找到标题":w=i.title,typeof i.description>"u"){if(u=c.querySelector('meta[name="description"]')?c.querySelector('meta[name="description"]').getAttribute("content"):"",!u){const n=c.querySelectorAll("p");let _="";for(const f of n){const y=f.textContent.trim();if(y.length>20&&(_+=y+" ",_.length>200))break}u=_.trim()}u&&(u=u.replace(/\s+/g," ").slice(0,100)+(u.length>100?"...":""))}else u=i.description;if(typeof i.image>"u"){let n=(b=c.querySelector('meta[property="og:image"]'))==null?void 0:b.getAttribute("content"),_=(h=c.querySelector('meta[name="twitter:image"]'))==null?void 0:h.getAttribute("content"),f="";const y=["article img",".article-content img",".post-content img",".content img","main img"];for(const e of y){const m=c.querySelector(e);if(m&&q(m)){f=m.src;break}}if(!f){const e=c.querySelectorAll("img");for(const m of e)if(q(m)){f=m.src;break}}if(a=n||_||f||"",a){if(!a.startsWith("http"))try{const e=new URL(i.url);a=new URL(a,e.origin).href}catch{a=""}a&&(a=`https://wsrv.nl/?url=${encodeURIComponent(a)}`)}}else a=i.image;a===""?x.value=!1:x.value=!0,k=new URL(i.url).hostname,s.value=w,S.value=u,o.value=a,g.value=k}catch{alert("无法获取链接数据")}}}),(b,h)=>(p(),d("div",{class:"card",onClick:L},[t("div",K,[t("h3",M,l(s.value),1),t("div",null,[t("p",T,l(S.value),1),t("div",E,[h[0]||(h[0]=t("p",null,"来自：",-1)),h[1]||(h[1]=t("p",null,null,-1)),t("p",null,l(g.value),1)])])]),x.value?(p(),d("img",{key:0,src:o.value,alt:"Image",class:"card-image"},null,8,W)):A("",!0)]))}},G=$(z,[["__scopeId","data-v-9bc239c1"]]),J={class:"article-card"},Q={class:"article-text"},X={class:"article-title"},Y={style:{"padding-top":"16px","padding-bottom":"32px"}},Z={key:0,class:"article-news-line"},tt={__name:"ArticleCard",props:{title:{type:String,required:!0},news:{type:Array,required:!0,validator:function(r){return r.length===0?!1:r.every(s=>s&&typeof s=="object"&&s.url&&s.url.trim()!=="")}}},setup(r){return(s,S)=>(p(),d("div",J,[t("div",Q,[t("div",X,l(r.title),1),t("div",Y,[(p(!0),d(C,null,I(r.news,(o,g)=>(p(),d("div",{class:"article-news",key:g},[j(G,{url:o.url,title:o.title,description:o.description,image:o.image},null,8,["url","title","description","image"]),g<r.news.length-1?(p(),d("div",Z)):A("",!0)]))),128))])])]))}},ot=$(tt,[["__scopeId","data-v-f4ff83e6"]]);export{ot as A,at as H,it as _};
